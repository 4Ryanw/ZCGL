<!DOCTYPE html>
<html lang="cn" xmlns:th="http://www.thymeleaf.org">

<head>
  <!--  meta 标签 -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>台账管理系统</title>
  <!-- 引入静态资源 -->
  <link rel="stylesheet" href="/vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="/vendors/base/vendor.bundle.base.css">
  <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/bootstrap-datetimepicker.css" >
  <link rel="shortcut icon" href="/images/favicon.png" />
</head>
<body>
<div class="container-scroller">
  <!-- 公共头部引用 -->
  <div class="header"></div>
  <!-- 主体流式布局 -->
  <div class="container-fluid page-body-wrapper">
    <!-- 导航边条 -->
    <nav  class="sidebar sidebar-offcanvas" id="siderbar">
    </nav>
    <!-- 主体部分 -->
    <div class="main-panel">
      <!--标题-->
      <p class="mytitle">设备类型</p>
      <!--内容-->
      <div class="content-wrapper">
        <!-- 表格-->
        <div class="row">
          <div class="col-md-12 stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-md-8"></div>
                  <div class="col-md-4">
                  <button type="button" class="btn btn-outline-primary btn-fw mr-2">新增设备类型</button>
                  <button type="button" class="btn btn-outline-success btn-fw mr-2" data-toggle="modal" data-target="#editModal">编辑</button>
                  <button type="button" class="btn btn-outline-danger btn-fw mr-2" data-toggle="modal" data-target="#deleteModal">删除</button>
                  </div>
                </div>
                <!--表格-->
                <div class="table-responsive">
                  <table id="device-type-listing" class="table table-hover table-refresh" th:fragment="table-refresh">
                    <thead>
                    <tr>
                      <th></th>
                      <th>设备类型</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class ="tr_sub" th:each="type : ${typeList}">
                      <td><input type="checkbox"/></td>
                      <td th:text="${type.type}"></td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--删除确认模态框-->
      <div class="modal fade " id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                &times;
              </button>
            </div>
            <div class="modal-body">
              <span style="vertical-align: inherit;margin-left: auto">
                是否确认删除?
              </span>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">关闭
              </button>
              <button type="button" class="btn btn-danger">
                确定
              </button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal -->
  </div>

      <!--编辑模态框-->
      <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="myModalLabel">编辑</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="devType">设备类型名</label>
                <input id="devType" type="text" class="form-control" />
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" onclick="editInfo()">确定</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
          </div>
        </div>
      </div>

      <!--新增人员模态框-->
      <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="myModalLabel">新增人员</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <form id="addAccount" action="/account/add" method="post">
                <div class="form-group">
                  <label for="username_add">用户姓名</label>
                  <input id="username_add" name="Username" type="text" class="form-control" placeholder="请输入用户姓名" />
                </div>
                <div class="form-group">
                  <label for="userId_add">用户账号</label>
                  <input id="userId_add" name="UserId" type="text" class="form-control" placeholder="请输入用户账户" />
                </div>
                <div class="form-group">
                  <label for="password_add" >设置密码</label>
                  <input id="password_add" name="Password" type="text" class="form-control" placeholder="请设置6位数以上密码" />
                </div>
                <div class="form-group">
                  <label for="password_add" >确认密码</label>
                  <input id="password2_add" type="text" class="form-control" placeholder="请确认密码"/>
                  <!--                <input  type="hidden" name="userRole" value="3"/>-->
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" onclick="addInfo()">立即提交</button>
              <button type="button" class="btn btn-danger" onclick="cleanInfo()">重新输入</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 公共底部引用 -->
      <footer class="footer"/>
    </div>
  </div>
</div>
</body>
<!-- 引入js -->
<script src="/vendors/base/vendor.bundle.base.js"></script>
<script src="/vendors/chart.js/Chart.min.js"></script>
<script src="/vendors/datatables.net/jquery.dataTables.js"></script>
<script src="/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
<script src="/js/off-canvas.js"></script>
<script src="/js/hoverable-collapse.js"></script>
<script src="/js/template.js"></script>
<script src="/js/dashboard.js"></script>
<script src="/js/data-table.js"></script>
<script src="/js/jquery.dataTables.js"></script>
<script src="/js/dataTables.bootstrap4.js"></script>
<script src="/js/olanguage.js"></script>
<script src="/js/bootstrap-datetimepicker.min.js"></script>
<script src="/js/bootstrap-datetimepicker.zh-CN.js"></script>
<!-- 自定义jS -->
<script>
  //被选中目标
  var selectedObj = null;
  //绑定表格点击事件
  function initTr_onclick(){
    $(".tr_sub").click(function () {
      selectedObj = this;
      $(".tr_sub").removeClass("active");
      $(this).addClass("active");
      $(".tr_sub").find(":checkbox").prop("checked",false);
      $(this).find(":checkbox").prop("checked", true);
    })
  }
  //初始化表格 加载数据
  function inittable(){
    debugger;
    $('.modal').modal('hide');
    $.ajax({
      url:"/baseInfos/type/list",
      type:"GET",
      async:false,
      success:function (data) {
        $(".table-refresh").html(data);
        $("#device-type-listing").dataTable().fnDestroy();
        $('#device-type-listing').DataTable({
          "aLengthMenu": [
            [5, 10, 15, -1],
            [5, 10, 15, "全部"]
          ],
          "iDisplayLength": 10,
          "language": {
            search: ""
          },
          "pagingType": "full_numbers",
          searching: true, paging: true, info: true
        });
        initTr_onclick();
      }
    });
  }

  /*初始化*/
  $(document).ready(function(){
    /*导入头部和尾部*/
    $(".sidebar").load("/pages/commons/sidebar.html");
    $(".header").load("/pages/commons/header.html");
    $(".footer").load("/pages/commons/footer.html");
    inittable();
  });

</script>
</html>

